<!-- Shared Upload Modal -->
<div class="modal fade" id="uploadModal" tabindex="-1" aria-labelledby="uploadModalLabel" aria-hidden="true">
  <div class="modal-dialog modal-dialog-centered modal-lg">
    <div class="modal-content rounded-4">
      <div class="modal-header">
        <h5 class="modal-title" id="uploadModalLabel">Upload Image</h5>
        <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
      </div>

      <div class="modal-body text-center">
        <!-- Drag & Drop Area (shown only in profile page) -->
        <div id="dropArea" class="border rounded p-3 mb-3 text-muted d-none" style="border-style: dashed;">
          Drag & drop image here
        </div>

        <input type="file" id="imageInput" accept="image/*" class="form-control mb-3">

        <!-- Preview Container (used in profile.html) -->
        <div id="previewImageContainer" class="mb-3 d-flex justify-content-center d-none">
          <img id="previewImage" class="rounded-circle shadow" style="width: 128px; height: 128px; display: none;">
        </div>

        <!-- Crop Preview Image -->
        <div id="cropContainer" class="d-none">
          <img id="cropImage" style="max-width: 100%;">
        </div>

        <!-- Crop Toolbar -->
        <div id="cropToolbar" class="d-none my-3">
          <button class="btn btn-sm btn-outline-primary me-2" onclick="zoomCrop(0.1)">Zoom In</button>
          <button class="btn btn-sm btn-outline-primary me-2" onclick="zoomCrop(-0.1)">Zoom Out</button>
          <button class="btn btn-sm btn-outline-danger" onclick="resetCrop()">Reset</button>
        </div>

        <!-- Upload Progress -->
        <div id="uploadProgressWrapper" class="progress d-none">
          <div id="uploadProgressBar" class="progress-bar" style="width: 0%">0%</div>
        </div>
      </div>

      <div class="modal-footer">
        <button id="uploadBtn" class="btn btn-success">Upload</button>
        <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Cancel</button>
      </div>
    </div>
  </div>
</div>
