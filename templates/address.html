{% extends 'base.html' %}

{% block content %}

{% if current_user.is_authenticated %}
  <div class="w-100 mt-4" style="padding-top: 25px;">
    <div class="row border-bottom">

      <!-- Left Navigation -->
      <div class="col-3 navbar py-2 border-top" style="position: fixed; top: 0; left: 0; height: 68vh; width: 23rem; z-index: 100;">
        <ul class="nav flex-column" style="width: 22rem;">
          <li class="nav-item"></li>
        </ul>
      </div>

      <!-- Top Title Section -->
      <div class="col-8 offset-3" style="margin-left: 25rem;">
        <div class="row align-items-center">
          <div class="col-1" style="font-size: 2rem; width: 3rem; cursor: pointer;" onclick="location.href='/profile'">
            <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-arrow-left-short" viewBox="0 0 16 16">
              <path fill-rule="evenodd" d="M12 8a.5.5 0 0 1-.5.5H5.707l2.147 2.146a.5.5 0 0 1-.708.708l-3-3a.5.5 0 0 1 0-.708l3-3a.5.5 0 1 1 .708.708L5.707 7.5H11.5a.5.5 0 0 1 .5.5"/>
            </svg>
          </div>
          <div class="col-11" style="font-size: 2rem;">
            <h3>{{ tag.capitalize() }} Address</h3>
          </div>
        </div>
      </div>
    </div>

    <div class="row">
      <!-- Left Navigation Bottom Links -->
      <div class="col-3 navbar my-4 py-2 border-top" style="position: fixed; top: 0; left: 0; height: 68vh; width: 23rem; z-index: 100;">
        <ul class="nav flex-column" style="width: 22rem;">
          <li class="nav-item fixed-bottom mt-0 mb-0 pb-0" style="width: 23rem; bottom: 0; padding: 0; margin: 0; font-size: 0.8rem;">
            <div class="row">
              <div class="col-1"></div>
              <div class="col-2"><p class="nav-link text-dark mb-0 pb-0">Privacy</p></div>
              <div class="col-2"><p class="nav-link text-dark mb-0 pb-0">Terms</p></div>
              <div class="col-2 text-end"><p class="nav-link text-dark mb-0 pb-0">Help</p></div>
              <div class="col-2"><p class="nav-link text-dark mb-0 pb-0">About</p></div>
              <div class="col-1"></div>
            </div>
          </li>
        </ul>
      </div>

      <!-- Right Section: Address Form -->
      <div class="col-6 offset-3 my-4" style="margin-left: 25rem;">
        <div class="card rounded-3 my-4 p-4">
          <div class="description mb-3">
            Provide your full {{ tag }} address including city, state, and country.
          </div>
          <form action="/address/{{ tag.lower() }}" method="POST">
            <div class="mb-3">
              <label for="address1" class="form-label">Address Line 1</label>
              <input type="text" id="address1" name="address1" class="form-control" value="{{ address.address1 if address else '' }}">
            </div>
            <div class="mb-3">
              <label for="address2" class="form-label">Address Line 2</label>
              <input type="text" id="address2" name="address2" class="form-control" value="{{ address.address2 if address else '' }}">
            </div>
            <div class="mb-3">
              <label for="address3" class="form-label">Address Line 3</label>
              <input type="text" id="address3" name="address3" class="form-control" value="{{ address.address3 if address else '' }}">
            </div>
            <div class="mb-3">
              <label for="city_id" class="form-label">City</label>
              <select class="form-select" id="city_id" name="city_id">
                {% for city in cities %}
                  <option value="{{ city.id }}" {% if address and city.id == address.city_id %}selected{% endif %}>{{ city.name }}</option>
                {% endfor %}
              </select>
            </div>
            <div class="mb-3">
              <label for="state_id" class="form-label">State</label>
              <select class="form-select" id="state_id" name="state_id">
                {% for state in states %}
                  <option value="{{ state.id }}" {% if address and state.id == address.state_id %}selected{% endif %}>{{ state.name }}</option>
                {% endfor %}
              </select>
            </div>
            <div class="mb-3">
              <label for="country_id" class="form-label">Country</label>
              <select class="form-select" id="country_id" name="country_id">
                {% for country in countries %}
                  <option value="{{ country.id }}" {% if address and country.id == address.country_id %}selected{% endif %}>{{ country.name }}</option>
                {% endfor %}
              </select>
            </div>
            <div class="mb-3">
              <label for="zipcode" class="form-label">Zip Code</label>
              <input type="text" id="zipcode" name="zipcode" class="form-control" value="{{ address.zipcode if address else '' }}">
            </div>

            <div class="buttons mt-3">
              <button type="submit" class="btn btn-outline-success">Save</button>
              <a href="/profile" class="btn btn-outline-danger">Cancel</a>
            </div>
          </form>
        </div>
      </div>
    </div>
  </div>
{% endif %}

<link href="https://cdnjs.cloudflare.com/ajax/libs/bootstrap-icons/1.10.5/font/bootstrap-icons.min.css" rel="stylesheet">

{% endblock %}
